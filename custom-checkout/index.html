<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Military Tees UK - Secure Checkout</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://js.stripe.com/v3/"></script>
</head>
<body>
    <div class="checkout-container">
        <!-- Header -->
        <header class="checkout-header">
            <div class="header-content">
                <div class="logo">
                    <h1>Military Tees UK</h1>
                    <p>Proudly serving those who serve</p>
                </div>
                <div class="security-badges">
                    <span class="badge">🔒 SSL Encrypted</span>
                    <span class="badge">💳 PCI Compliant</span>
                </div>
            </div>
        </header>

        <div class="checkout-content">
            <!-- Main Checkout Form -->
            <div class="checkout-main">
                <!-- Progress Indicator -->
                <div class="progress-indicator">
                    <div class="step active" data-step="1">
                        <span class="step-number">1</span>
                        <span class="step-label">Contact</span>
                    </div>
                    <div class="step" data-step="2">
                        <span class="step-number">2</span>
                        <span class="step-label">Shipping</span>
                    </div>
                    <div class="step" data-step="3">
                        <span class="step-number">3</span>
                        <span class="step-label">Payment</span>
                    </div>
                </div>

                <form id="checkout-form" class="checkout-form">
                    <!-- Express Checkout Section -->
                    <div class="express-checkout-section">
                        <h3>Express Checkout</h3>
                        <div id="express-checkout-element">
                            <!-- Express checkout buttons will be inserted here -->
                        </div>
                        <div class="divider">
                            <span>OR</span>
                        </div>
                    </div>

                    <!-- Step 1: Contact Information -->
                    <div class="form-step active" id="step-1">
                        <h3>Contact Information</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="email">Email Address *</label>
                                <input type="email" id="email" name="email" required>
                                <div class="field-error" id="email-error"></div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="phone">Phone Number</label>
                                <input type="tel" id="phone" name="phone">
                                <div class="field-error" id="phone-error"></div>
                            </div>
                        </div>
                        <div class="newsletter-opt-in">
                            <label class="checkbox-label">
                                <input type="checkbox" id="newsletter" name="newsletter">
                                <span class="checkmark"></span>
                                Email me with news and offers
                            </label>
                        </div>
                        <button type="button" class="btn btn-primary continue-btn" onclick="goToStep(2)">
                            Continue to Shipping
                        </button>
                    </div>

                    <!-- Step 2: Shipping Information -->
                    <div class="form-step" id="step-2">
                        <h3>Shipping Address</h3>
                        <div class="form-row">
                            <div class="form-group half">
                                <label for="firstName">First Name *</label>
                                <input type="text" id="firstName" name="firstName" required>
                                <div class="field-error" id="firstName-error"></div>
                            </div>
                            <div class="form-group half">
                                <label for="lastName">Last Name *</label>
                                <input type="text" id="lastName" name="lastName" required>
                                <div class="field-error" id="lastName-error"></div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="address1">Address Line 1 *</label>
                                <input type="text" id="address1" name="address1" required>
                                <div class="field-error" id="address1-error"></div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="address2">Address Line 2</label>
                                <input type="text" id="address2" name="address2">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group half">
                                <label for="city">City *</label>
                                <input type="text" id="city" name="city" required>
                                <div class="field-error" id="city-error"></div>
                            </div>
                            <div class="form-group half">
                                <label for="postcode">Postcode *</label>
                                <input type="text" id="postcode" name="postcode" required>
                                <div class="field-error" id="postcode-error"></div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="country">Country *</label>
                                <select id="country" name="country" required>
                                    <option value="GB">United Kingdom</option>
                                    <option value="US">United States</option>
                                    <option value="CA">Canada</option>
                                    <option value="AU">Australia</option>
                                </select>
                                <div class="field-error" id="country-error"></div>
                            </div>
                        </div>

                        <!-- Shipping Methods -->
                        <div class="shipping-methods">
                            <h4>Shipping Method</h4>
                            <div class="shipping-option">
                                <label class="radio-label">
                                    <input type="radio" name="shipping" value="standard" checked>
                                    <span class="radio-custom"></span>
                                    <div class="shipping-details">
                                        <div class="shipping-name">Standard Delivery</div>
                                        <div class="shipping-time">3-5 business days</div>
                                    </div>
                                    <div class="shipping-price">£4.99</div>
                                </label>
                            </div>
                            <div class="shipping-option">
                                <label class="radio-label">
                                    <input type="radio" name="shipping" value="express">
                                    <span class="radio-custom"></span>
                                    <div class="shipping-details">
                                        <div class="shipping-name">Express Delivery</div>
                                        <div class="shipping-time">1 business day</div>
                                    </div>
                                    <div class="shipping-price">£8.99</div>
                                </label>
                            </div>
                            <div class="shipping-option">
                                <label class="radio-label">
                                    <input type="radio" name="shipping" value="premium">
                                    <span class="radio-custom"></span>
                                    <div class="shipping-details">
                                        <div class="shipping-name">Premium Delivery</div>
                                        <div class="shipping-time">1-2 business days</div>
                                    </div>
                                    <div class="shipping-price">£12.99</div>
                                </label>
                            </div>
                        </div>

                        <div class="step-buttons">
                            <button type="button" class="btn btn-secondary" onclick="goToStep(1)">
                                Back to Contact
                            </button>
                            <button type="button" class="btn btn-primary continue-btn" onclick="goToStep(3)">
                                Continue to Payment
                            </button>
                        </div>
                    </div>

                    <!-- Step 3: Payment Information -->
                    <div class="form-step" id="step-3">
                        <h3>Payment Information</h3>

                        <!-- Promo Code Section -->
                        <div class="promo-code-section">
                            <div class="promo-toggle" onclick="togglePromoCode()">
                                <span>Have a promo code?</span>
                                <span class="toggle-icon">+</span>
                            </div>
                            <div class="promo-input-container" id="promo-input">
                                <div class="form-row">
                                    <div class="form-group">
                                        <input type="text" id="promoCode" name="promoCode" placeholder="Enter promo code">
                                        <button type="button" class="btn btn-outline apply-promo-btn" onclick="applyPromoCode()">
                                            Apply
                                        </button>
                                    </div>
                                </div>
                                <div class="promo-message" id="promo-message"></div>
                            </div>
                        </div>

                        <!-- Payment Method -->
                        <div class="payment-method">
                            <h4>Payment Method</h4>
                            <div id="payment-element">
                                <!-- Stripe Payment Element will be inserted here -->
                            </div>
                            <div id="payment-errors" class="field-error"></div>
                        </div>

                        <div class="step-buttons">
                            <button type="button" class="btn btn-secondary" onclick="goToStep(2)">
                                Back to Shipping
                            </button>
                            <button type="submit" class="btn btn-primary payment-btn" id="submit-payment">
                                <span class="btn-text">Complete Order</span>
                                <span class="btn-loading" style="display: none;">
                                    <span class="spinner"></span>
                                    Processing...
                                </span>
                            </button>
                        </div>
                    </div>
                </form>
            </div>

            <!-- Order Summary Sidebar -->
            <div class="order-summary">
                <div class="summary-header">
                    <h3>Order Summary</h3>
                    <button class="toggle-summary" onclick="toggleSummary()">
                        <span class="summary-total" id="mobile-total">£0.00</span>
                        <span class="toggle-icon">▼</span>
                    </button>
                </div>
                
                <div class="summary-content" id="summary-content">
                    <div class="order-items" id="order-items">
                        <!-- Order items will be populated by JavaScript -->
                    </div>
                    
                    <div class="summary-breakdown">
                        <div class="summary-line">
                            <span>Subtotal</span>
                            <span id="subtotal">£0.00</span>
                        </div>
                        <div class="summary-line">
                            <span>Shipping</span>
                            <span id="shipping-cost">£4.99</span>
                        </div>
                        <div class="summary-line discount-line" id="discount-line" style="display: none;">
                            <span>Discount <span class="promo-code-applied" id="applied-promo"></span></span>
                            <span id="discount-amount">-£0.00</span>
                        </div>
                        <div class="summary-line">
                            <span>VAT (20%)</span>
                            <span id="tax-amount">£0.00</span>
                        </div>
                        <div class="summary-line total-line">
                            <span>Total</span>
                            <span id="total-amount">£0.00</span>
                        </div>
                    </div>

                    <div class="trust-signals">
                        <div class="trust-signal">
                            <span class="trust-icon">🔒</span>
                            <span>256-bit SSL encryption</span>
                        </div>
                        <div class="trust-signal">
                            <span class="trust-icon">💳</span>
                            <span>PCI DSS compliant</span>
                        </div>
                        <div class="trust-signal">
                            <span class="trust-icon">↩️</span>
                            <span>30-day money back guarantee</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay" style="display: none;">
        <div class="loading-content">
            <div class="spinner large"></div>
            <p>Processing your payment...</p>
        </div>
    </div>

    <!-- Scripts -->
    <script src="checkout.js"></script>
</body>
</html>